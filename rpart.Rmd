---
title: "Rpart"
date: "03/05/2024"
output: html_document
---

## Packages
```{r packages}
  source("/home/onyxia/work/INSEE/Synthpop/Fonctions.R")
  library(rpart)
  library(rpart.plot)
  library(synthpop)
```

## Jeu de donn√©es
```{r}
    df = jeudedonnes()
    df_num = df[, c("age", "depress", "nofriend", "height", "weight", "bmi")]
    df_fac = df[, c("sex", "agegr", "placesize", "region", "edu", "eduspec", "socprof", "marital", "ls", "trust", "trustfam", "trustneigh", "sport", "smoke", "alcsol", "wkabint", "englang")]
    visit_sequence = c(11,16,22,2,23,24,18,19,1,17,15,21,12,13,14,20,6,3,9,4,10,8,5,7)
    regles = list(marital = "age < 18")
    regles_val = list(marital = "SINGLE")
```

## Synthetisation
```{r synthetisation}
    syn_cart = syn(df, method = "cart", visit.sequence = visit_sequence, rules = regles, rvalues = regles_val, seed = 1, models = TRUE)
```

## Arbre
```{r arbre}
    rpart.plot(syn_cart$models)
```